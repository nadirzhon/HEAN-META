<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEAN Trading Command Center</title>
    <link rel="stylesheet" href="command-center.css">
</head>
<body class="theme-light">
    <!-- Global Top Bar -->
    <div class="top-bar">
        <div class="top-bar-left">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <span class="logo-text">HEAN</span>
            </div>
            <div class="status-indicators">
                <span id="indicator-mode" class="indicator" data-tooltip="Trading Mode">PAPER</span>
                <span id="indicator-engine" class="indicator indicator-offline" data-tooltip="Engine Status">OFFLINE</span>
                <span id="indicator-ws" class="indicator indicator-offline" data-tooltip="WebSocket">WS</span>
                <span id="indicator-latency" class="indicator" data-tooltip="API Latency">--ms</span>
                <span id="indicator-risk" class="indicator indicator-safe" data-tooltip="Risk Status">SAFE</span>
                <span id="indicator-sync" class="indicator" data-tooltip="Last Sync">--</span>
            </div>
        </div>
        <div class="top-bar-right">
            <button id="btn-theme-toggle" class="btn-icon" title="Toggle Theme">üåì</button>
            <button id="btn-command-palette" class="btn-icon" title="Command Palette (Ctrl+K)">‚åò</button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-label">Dashboard</span>
                </a>
                <a href="#trading" class="nav-item" data-page="trading">
                    <span class="nav-icon">üíπ</span>
                    <span class="nav-label">Trading</span>
                </a>
                <a href="#strategies" class="nav-item" data-page="strategies">
                    <span class="nav-icon">üéØ</span>
                    <span class="nav-label">Strategies</span>
                </a>
                <a href="#analytics" class="nav-item" data-page="analytics">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-label">Analytics</span>
                </a>
                <a href="#risk" class="nav-item" data-page="risk">
                    <span class="nav-icon">üõ°Ô∏è</span>
                    <span class="nav-label">Risk</span>
                </a>
                <a href="#logs" class="nav-item" data-page="logs">
                    <span class="nav-icon">üìù</span>
                    <span class="nav-label">Logs</span>
                </a>
                <a href="#settings" class="nav-item" data-page="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-label">Settings</span>
                </a>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="content">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <div class="page-actions">
                        <button id="btn-start-engine" class="btn btn-primary">‚ñ∂ Start</button>
                        <button id="btn-stop-engine" class="btn btn-danger" disabled>‚èπ Stop</button>
                        <button id="btn-pause-engine" class="btn btn-warning" disabled>‚è∏ Pause</button>
                        <button id="btn-resume-engine" class="btn btn-success" disabled>‚ñ∂ Resume</button>
                        <button id="btn-reconcile" class="btn btn-secondary">üîÑ Reconcile</button>
                        <button id="btn-smoke-test" class="btn btn-secondary">üß™ Smoke Test</button>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Equity</div>
                        <div class="metric-value" id="metric-equity">$0.00</div>
                        <div class="metric-change" id="metric-equity-change">+0.00%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Daily PnL</div>
                        <div class="metric-value" id="metric-daily-pnl">$0.00</div>
                        <div class="metric-change" id="metric-daily-pnl-change">+0.00%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Open Positions</div>
                        <div class="metric-value" id="metric-positions">0</div>
                        <div class="metric-sub">Max: <span id="metric-max-positions">0</span></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Open Orders</div>
                        <div class="metric-value" id="metric-orders">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Drawdown</div>
                        <div class="metric-value" id="metric-drawdown">0.00%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Win Rate</div>
                        <div class="metric-value" id="metric-winrate">0.00%</div>
                    </div>
                </div>

                <!-- Event Feed -->
                <div class="section">
                    <div class="section-header">
                        <h2>Event Feed</h2>
                        <div class="section-actions">
                            <button id="btn-clear-events" class="btn btn-sm btn-secondary">Clear</button>
                            <label class="toggle">
                                <input type="checkbox" id="toggle-auto-scroll" checked>
                                <span>Auto-scroll</span>
                            </label>
                        </div>
                    </div>
                    <div id="event-feed" class="event-feed"></div>
                </div>

                <!-- Health Panel -->
                <div class="section">
                    <h2>Health</h2>
                    <div id="health-panel" class="health-panel"></div>
                </div>
            </div>

            <!-- Trading Page -->
            <div id="page-trading" class="page">
                <div class="page-header">
                    <h1>Trading</h1>
                    <div class="page-actions">
                        <button id="btn-place-test-order" class="btn btn-primary">Place Test Order</button>
                        <button id="btn-close-position" class="btn btn-warning">Close Position</button>
                        <button id="btn-cancel-all" class="btn btn-danger">Cancel All Orders</button>
                    </div>
                </div>

                <div class="trading-grid">
                    <!-- Positions -->
                    <div class="section">
                        <h2>Positions</h2>
                        <div id="positions-table" class="data-table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Side</th>
                                        <th>Size</th>
                                        <th>Entry</th>
                                        <th>Current</th>
                                        <th>PnL</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="positions-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Orders -->
                    <div class="section">
                        <h2>Orders</h2>
                        <div id="orders-table" class="data-table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Symbol</th>
                                        <th>Side</th>
                                        <th>Size</th>
                                        <th>Price</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-tbody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Strategies Page -->
            <div id="page-strategies" class="page">
                <div class="page-header">
                    <h1>Strategies</h1>
                </div>
                <div id="strategies-list" class="strategies-list"></div>
            </div>

            <!-- Analytics Page -->
            <div id="page-analytics" class="page">
                <div class="page-header">
                    <h1>Analytics</h1>
                    <div class="page-actions">
                        <button id="btn-run-backtest" class="btn btn-primary">Run Backtest</button>
                        <button id="btn-run-evaluate" class="btn btn-primary">Run Evaluate</button>
                    </div>
                </div>

                <div class="analytics-grid">
                    <div class="section">
                        <h2>Summary</h2>
                        <div id="analytics-summary" class="analytics-summary"></div>
                    </div>
                    <div class="section">
                        <h2>Blocked Signals</h2>
                        <div id="analytics-blocks" class="analytics-blocks"></div>
                    </div>
                    <div class="section">
                        <h2>Jobs</h2>
                        <div id="jobs-list" class="jobs-list"></div>
                    </div>
                </div>
            </div>

            <!-- Risk Page -->
            <div id="page-risk" class="page">
                <div class="page-header">
                    <h1>Risk Management</h1>
                </div>
                <div class="risk-grid">
                    <div class="section">
                        <h2>Risk Status</h2>
                        <div id="risk-status" class="risk-status"></div>
                    </div>
                    <div class="section">
                        <h2>Risk Limits</h2>
                        <div id="risk-limits" class="risk-limits"></div>
                    </div>
                    <div class="section">
                        <h2>Gate Inspector</h2>
                        <div id="gate-inspector" class="gate-inspector"></div>
                    </div>
                </div>
            </div>

            <!-- Logs Page -->
            <div id="page-logs" class="page">
                <div class="page-header">
                    <h1>Logs</h1>
                    <div class="page-actions">
                        <input type="text" id="log-search" class="input" placeholder="Search logs...">
                        <select id="log-level-filter" class="select">
                            <option value="all">All Levels</option>
                            <option value="debug">Debug</option>
                            <option value="info">Info</option>
                            <option value="warning">Warning</option>
                            <option value="error">Error</option>
                        </select>
                        <button id="btn-clear-logs" class="btn btn-secondary">Clear</button>
                    </div>
                </div>
                <div id="log-feed" class="log-feed"></div>
            </div>

            <!-- Settings Page -->
            <div id="page-settings" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                </div>
                <div class="settings-grid">
                    <div class="section">
                        <h2>System Settings</h2>
                        <div id="settings-display" class="settings-display"></div>
                    </div>
                    <div class="section">
                        <h2>Live Trading Checklist</h2>
                        <div id="live-checklist" class="live-checklist"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Command Palette Modal -->
    <div id="command-palette" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>Command Palette</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="command-input" class="input" placeholder="Type command...">
                <div id="command-suggestions" class="command-suggestions"></div>
            </div>
        </div>
    </div>

    <!-- Confirm Danger Modal -->
    <div id="confirm-danger-modal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="confirm-title">Confirm Action</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="confirm-message" class="confirm-message"></div>
                <div class="confirm-flags">
                    <div class="flag-item">
                        <strong>DRY_RUN:</strong> <span id="confirm-dry-run">--</span>
                    </div>
                    <div class="flag-item">
                        <strong>LIVE_CONFIRM:</strong> <span id="confirm-live-confirm">--</span>
                    </div>
                    <div class="flag-item">
                        <strong>Mode:</strong> <span id="confirm-mode">--</span>
                    </div>
                </div>
                <div class="confirm-checkbox">
                    <label>
                        <input type="checkbox" id="confirm-checkbox">
                        <span>I understand this action</span>
                    </label>
                </div>
                <div class="confirm-phrase">
                    <label>Confirmation Phrase:</label>
                    <input type="text" id="confirm-phrase-input" class="input" placeholder="I_UNDERSTAND_LIVE_TRADING">
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirm-cancel" class="btn btn-secondary">Cancel</button>
                <button id="confirm-submit" class="btn btn-danger" disabled>Confirm</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <div class="loading-message">Loading...</div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="api-client.js" onerror="console.error('Failed to load api-client.js')"></script>
    <script src="command-center.js" onerror="console.error('Failed to load command-center.js')"></script>
    <script>
        // Verify scripts loaded
        window.addEventListener('load', () => {
            if (typeof api === 'undefined') {
                console.error('API client not loaded!');
                alert('–û—à–∏–±–∫–∞: API –∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
            } else {
                console.log('All scripts loaded successfully');
            }
        });
    </script>
</body>
</html>

