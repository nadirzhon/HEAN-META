<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEAN Trading Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">⚡</span>
                    <span class="logo-text">HEAN Dashboard</span>
                </div>
                <div class="header-status">
                    <span id="engine-status" class="status-badge status-stopped">Stopped</span>
                    <span id="trading-mode" class="mode-badge mode-paper">Paper</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="dashboard-nav">
            <button class="nav-btn active" data-page="dashboard">Dashboard</button>
            <button class="nav-btn" data-page="strategies">Strategies</button>
            <button class="nav-btn" data-page="risk">Risk</button>
            <button class="nav-btn" data-page="orders">Orders</button>
            <button class="nav-btn" data-page="positions">Positions</button>
            <button class="nav-btn" data-page="logs">Logs</button>
            <button class="nav-btn" data-page="settings">Settings</button>
        </nav>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <div class="page-actions">
                        <button id="btn-start-engine" class="btn btn-primary">Start Engine</button>
                        <button id="btn-stop-engine" class="btn btn-danger" disabled>Stop Engine</button>
                        <button id="btn-refresh" class="btn btn-secondary">Refresh</button>
                    </div>
                </div>

                <!-- Metrics Cards -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Equity</div>
                        <div class="metric-value" id="metric-equity">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Daily PnL</div>
                        <div class="metric-value" id="metric-daily-pnl">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Initial Capital</div>
                        <div class="metric-value" id="metric-initial-capital">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Open Positions</div>
                        <div class="metric-value" id="metric-positions-count">0</div>
                    </div>
                </div>

                <!-- Recent Events -->
                <div class="section">
                    <h2>Recent Events</h2>
                    <div id="events-list" class="events-list"></div>
                </div>

                <!-- Health Checks -->
                <div class="section">
                    <h2>Health Checks</h2>
                    <div id="health-checks" class="health-checks"></div>
                </div>
            </div>

            <!-- Strategies Page -->
            <div id="page-strategies" class="page">
                <div class="page-header">
                    <h1>Strategies</h1>
                    <button id="btn-run-smoke-test" class="btn btn-primary">Run Smoke Test</button>
                </div>
                <div class="strategies-list" id="strategies-list">
                    <div class="loading">Loading strategies...</div>
                </div>
            </div>

            <!-- Risk Page -->
            <div id="page-risk" class="page">
                <div class="page-header">
                    <h1>Risk Management</h1>
                </div>
                <div class="risk-metrics" id="risk-metrics">
                    <div class="loading">Loading risk metrics...</div>
                </div>
            </div>

            <!-- Orders Page -->
            <div id="page-orders" class="page">
                <div class="page-header">
                    <h1>Orders</h1>
                    <div class="page-actions">
                        <button id="btn-place-test-order" class="btn btn-primary">Place Test Order</button>
                        <select id="order-filter">
                            <option value="all">All</option>
                            <option value="open">Open</option>
                            <option value="filled">Filled</option>
                        </select>
                    </div>
                </div>
                <div class="orders-table-container">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody id="orders-tbody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Positions Page -->
            <div id="page-positions" class="page">
                <div class="page-header">
                    <h1>Positions</h1>
                    <button id="btn-refresh-positions" class="btn btn-secondary">Refresh</button>
                </div>
                <div class="positions-table-container">
                    <table class="positions-table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Entry Price</th>
                                <th>Unrealized PnL</th>
                                <th>Realized PnL</th>
                            </tr>
                        </thead>
                        <tbody id="positions-tbody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Logs Page -->
            <div id="page-logs" class="page">
                <div class="page-header">
                    <h1>Logs</h1>
                    <button id="btn-clear-logs" class="btn btn-secondary">Clear</button>
                </div>
                <div id="logs-container" class="logs-container"></div>
            </div>

            <!-- Settings Page -->
            <div id="page-settings" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                </div>
                <div class="settings-content" id="settings-content">
                    <div class="loading">Loading settings...</div>
                </div>
            </div>
        </main>
    </div>

    <script src="dashboard.js" onerror="console.error('Failed to load dashboard.js')"></script>
    <script>
        // Verify script loaded
        window.addEventListener('load', () => {
            if (typeof apiCall === 'undefined') {
                console.error('Dashboard script not loaded properly!');
                alert('Ошибка: Скрипт dashboard.js не загружен. Пожалуйста, обновите страницу.');
            } else {
                console.log('Dashboard script loaded successfully');
            }
        });
    </script>
</body>
</html>

