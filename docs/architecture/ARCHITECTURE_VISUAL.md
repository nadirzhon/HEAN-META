# ğŸ—ï¸ HEAN Trading System - Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

## ğŸŒ ĞĞ±Ñ‰Ğ°Ñ Ğ¡Ñ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬                             â”‚
â”‚                    (Ğ’Ğ°Ñˆ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ / CLI)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/WebSocket
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DOCKER COMPOSE NETWORK                         â”‚
â”‚                       (hean-network)                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   UI (Nginx) â”‚  â”‚  API (FastAPI)â”‚  â”‚    Redis     â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚
â”‚  â”‚  Port: 3000  â”‚  â”‚  Port: 8000  â”‚  â”‚  Port: 6379  â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚
â”‚  â”‚  React 18    â”‚â—„â”€â”¤  Python 3.11 â”‚â—„â”€â”¤  Redis 7     â”‚          â”‚
â”‚  â”‚  Vite 6      â”‚  â”‚  Uvicorn     â”‚  â”‚  Pub/Sub     â”‚          â”‚
â”‚  â”‚  Material-UI â”‚  â”‚  WebSocket   â”‚  â”‚  State Cache â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â”‚ Bybit API                            â”‚
â”‚                            â–¼                                      â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                   â”‚  SYMBIONT X  â”‚                               â”‚
â”‚                   â”‚              â”‚                               â”‚
â”‚                   â”‚  Trading Bot â”‚                               â”‚
â”‚                   â”‚  Paper Mode  â”‚                               â”‚
â”‚                   â”‚  Testnet API â”‚                               â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                            â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTPS/WebSocket
                             â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Bybit Exchange  â”‚
                   â”‚    (Testnet)     â”‚
                   â”‚                  â”‚
                   â”‚  BTC/USDT        â”‚
                   â”‚  ETH/USDT        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ”Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. User â†’ UI â†’ API â†’ Trading
```
Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€
  â”‚
  â”‚ HTTP GET/POST
  â–¼
UI Container (localhost:3000)
  â”‚
  â”‚ Nginx proxy â†’ /api/* â†’ localhost:8000
  â–¼
API Container
  â”‚
  â”‚ REST API / WebSocket
  â–¼
Trading Engine
  â”‚
  â”‚ Bybit API calls
  â–¼
Bybit Testnet
```

### 2. Real-time Updates (WebSocket)
```
Bybit Testnet
  â”‚
  â”‚ Price feeds, Order updates
  â–¼
SYMBIONT X Container
  â”‚
  â”‚ Events
  â–¼
Redis (Pub/Sub)
  â”‚
  â”‚ Subscribe
  â–¼
API Container (WebSocket Server)
  â”‚
  â”‚ WS messages
  â–¼
UI (Browser)
  â”‚
  â”‚ Live dashboard update
  â–¼
User
```

---

## ğŸ“¦ ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾

### Container 1: `hean-ui`
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      NGINX + React App         â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Built Static Files     â”‚ â”‚
â”‚  â”‚   - HTML, CSS, JS        â”‚ â”‚
â”‚  â”‚   - React 18 Bundle      â”‚ â”‚
â”‚  â”‚   - Material-UI Theme    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Nginx Configuration    â”‚ â”‚
â”‚  â”‚   - Reverse Proxy        â”‚ â”‚
â”‚  â”‚   - /api â†’ backend:8000  â”‚ â”‚
â”‚  â”‚   - /ws â†’ backend:8000   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  Port: 3000 (HTTP)             â”‚
â”‚  Health: wget localhost        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Container 2: `hean-api`
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    FastAPI Backend Server      â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   FastAPI Application    â”‚ â”‚
â”‚  â”‚   - REST Endpoints       â”‚ â”‚
â”‚  â”‚   - WebSocket Handler    â”‚ â”‚
â”‚  â”‚   - Event Bus            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Trading Components     â”‚ â”‚
â”‚  â”‚   - Strategies           â”‚ â”‚
â”‚  â”‚   - Risk Management      â”‚ â”‚
â”‚  â”‚   - Portfolio Manager    â”‚ â”‚
â”‚  â”‚   - Execution Router     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Exchange Integration   â”‚ â”‚
â”‚  â”‚   - Bybit HTTP Client    â”‚ â”‚
â”‚  â”‚   - Bybit WebSocket      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  Port: 8000 (HTTP + WS)        â”‚
â”‚  Health: GET /health           â”‚
â”‚  Workers: 2 (Uvicorn)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Container 3: `hean-redis`
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Redis 7 Alpine            â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Data Structures        â”‚ â”‚
â”‚  â”‚   - State Cache          â”‚ â”‚
â”‚  â”‚   - Session Store        â”‚ â”‚
â”‚  â”‚   - Order Queue          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Pub/Sub System         â”‚ â”‚
â”‚  â”‚   - system_status        â”‚ â”‚
â”‚  â”‚   - order_decisions      â”‚ â”‚
â”‚  â”‚   - ai_catalyst          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  Port: 6379                    â”‚
â”‚  Persistence: AOF enabled      â”‚
â”‚  MaxMemory: 512MB (LRU)        â”‚
â”‚  Health: PING                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Container 4: `hean-symbiont-testnet`
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    SYMBIONT X Trading Bot      â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Strategy Population    â”‚ â”‚
â”‚  â”‚   - 50 Evolved Agents    â”‚ â”‚
â”‚  â”‚   - Genetic Algorithm    â”‚ â”‚
â”‚  â”‚   - Multi-Symbol Support â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Market Analysis        â”‚ â”‚
â”‚  â”‚   - Regime Detection     â”‚ â”‚
â”‚  â”‚   - Pattern Recognition  â”‚ â”‚
â”‚  â”‚   - Signal Generation    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Risk & Execution       â”‚ â”‚
â”‚  â”‚   - Immune System        â”‚ â”‚
â”‚  â”‚   - Circuit Breaker      â”‚ â”‚
â”‚  â”‚   - Portfolio Management â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  Mode: PAPER TRADING           â”‚
â”‚  Capital: $10,000 (virtual)    â”‚
â”‚  Symbols: BTC/USDT, ETH/USDT   â”‚
â”‚  Health: Process check         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Ğ¡ĞµÑ‚ĞµĞ²Ğ¾Ğµ Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ

### Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ÑÑ Ğ¡ĞµÑ‚ÑŒ (Docker Bridge)
```
Network: hean-network (bridge)

Container IPs (dynamic):
- hean-ui:              172.18.0.2
- hean-api:             172.18.0.3
- hean-redis:           172.18.0.4
- hean-symbiont-testnet: 172.18.0.5

DNS Resolution (automatic):
- ui â†’ api:8000
- api â†’ redis:6379
- symbiont â†’ api:8000
- symbiont â†’ redis:6379
```

### Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ ĞŸĞ¾Ñ€Ñ‚Ñ‹ (Host)
```
Host Machine:
- localhost:3000 â†’ hean-ui:80
- localhost:8000 â†’ hean-api:8000
- localhost:6379 â†’ hean-redis:6379
```

---

## ğŸ“Š ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### 1. Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğµ Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ
```
1. Market Data
   â†“
2. SYMBIONT X
   - Regime Detection
   - Strategy Population
   - Signal Generation
   â†“
3. Decision Engine
   - Risk Check
   - Position Sizing
   - Gate Validation
   â†“
4. Execution Router
   - Order Creation
   - Paper/Live Mode
   â†“
5. Bybit API
   - Order Placement
   â†“
6. Order Tracking
   - Fills Detection
   - Position Update
   â†“
7. Portfolio Update
   - P&L Calculation
   - State Persistence (Redis)
   â†“
8. WebSocket Notification
   - UI Real-time Update
```

### 2. API Request
```
User (Browser)
  â†“
1. HTTP Request
   GET /portfolio/summary
  â†“
2. Nginx (UI Container)
   Proxy â†’ /api/portfolio/summary
  â†“
3. FastAPI (API Container)
   - Rate Limit Check
   - Authentication
   - Route Handler
  â†“
4. Portfolio Service
   - Fetch from Redis
   - Calculate Metrics
  â†“
5. Response
   JSON with portfolio data
  â†“
6. UI Update
   Dashboard refresh
```

### 3. WebSocket Stream
```
1. Client Connection
   ws://localhost:8000/ws
  â†“
2. WebSocket Handler
   - Connection accept
   - Session creation
  â†“
3. Subscribe Request
   {"action": "subscribe", "topic": "system_status"}
  â†“
4. Redis Pub/Sub
   - Subscribe to topic
   - Listen for messages
  â†“
5. Event Publishing
   - System publishes update
   - Redis propagates
  â†“
6. WebSocket Send
   - Format message
   - Send to client
  â†“
7. UI Update
   - Receive message
   - Update component state
```

---

## ğŸ›¡ï¸ Health Checks

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container   â”‚ Health Check     â”‚ Interval â”‚ Retries â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hean-ui     â”‚ wget localhost   â”‚ 30s      â”‚ 3       â”‚
â”‚ hean-api    â”‚ curl /health     â”‚ 30s      â”‚ 3       â”‚
â”‚ hean-redis  â”‚ redis-cli PING   â”‚ 10s      â”‚ 5       â”‚
â”‚ symbiont    â”‚ ps aux | grep py â”‚ 30s      â”‚ 3       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:
- UI Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ API
- API Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Redis (healthy)
- SYMBIONT Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½
```

---

## ğŸ’¾ Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ”Ğ°Ğ½Ğ½Ñ‹Ñ…

### Volumes
```
Docker Volumes:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Volume       â”‚ Container  â”‚ Purpose     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ redis-data   â”‚ hean-redis â”‚ Persistence â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Bind Mounts:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host             â”‚ Container   â”‚ Purpose    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ./src            â”‚ /app/src    â”‚ Code (ro)  â”‚
â”‚ ./logs           â”‚ /app/logs   â”‚ Logging    â”‚
â”‚ ./.env           â”‚ /app/.env   â”‚ Config (ro)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
```
Log Rotation (Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²):
- Driver: json-file
- Max Size: 10MB
- Max Files: 3
- Total: ~30MB per container

Ğ›Ğ¾Ğ³Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ñ‡ĞµÑ€ĞµĞ·:
docker compose logs <service>
```

---

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Security Layers
```
1. Network Isolation
   - Internal: hean-network (bridge)
   - External: Only 3000, 8000, 6379 exposed

2. Container Security
   - Non-root users (Ğ³Ğ´Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾)
   - Read-only file systems (Ğ³Ğ´Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ğ¼Ğ¾)
   - Resource limits (CPU, Memory)

3. Application Security
   - Rate Limiting (slowapi)
   - CORS configured
   - Input validation (Pydantic)

4. Trading Security
   - Paper Mode default
   - LIVE_CONFIRM gate
   - Risk limits & killswitch
```

---

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service     â”‚ Scalable?    â”‚ Notes          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UI          â”‚ âœ… Yes       â”‚ Stateless      â”‚
â”‚ API         â”‚ âœ… Yes       â”‚ + Load Balancerâ”‚
â”‚ Redis       â”‚ âš ï¸ Sentinel  â”‚ Master/Replica â”‚
â”‚ SYMBIONT    â”‚ âš ï¸ Complex   â”‚ State sync     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ API:
docker compose up -d --scale api=3
+ Nginx/HAProxy load balancer
```

### Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ)
```
Resource Limits (docker-compose.yml):

API:
- CPU: 0.5-2 cores
- Memory: 512MB-2GB

UI:
- CPU: 0.1-0.5 cores
- Memory: 128MB-512MB

Redis:
- CPU: 0.25-1 core
- Memory: 256MB-512MB

SYMBIONT:
- CPU: 0.5-2 cores
- Memory: 512MB-2GB
```

---

## ğŸ¯ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Endpoints

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
```
FastAPI Metrics:
http://localhost:8000/metrics (Prometheus format)

Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:
- request_count
- request_duration
- active_connections
- websocket_connections
- order_count
- position_count
- pnl_total
```

### Healthchecks
```
GET /health
{
  "status": "healthy",
  "services": {
    "redis": "ok",
    "exchange": "ok",
    "engine": "running"
  },
  "timestamp": "2026-01-30T12:00:00Z"
}
```

---

**ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ´Ğ»Ñ:**
- âœ… Production deployment
- âœ… High availability
- âœ… Easy scaling
- âœ… Monitoring & observability
- âœ… Security by default

**Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ!** ğŸš€
